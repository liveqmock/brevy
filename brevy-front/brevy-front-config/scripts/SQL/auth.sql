DROP TABLE AP_ACCESS_PERM;
CREATE TABLE AP_ACCESS_PERM ( ID NUMBER NOT NULL, APP_ID NUMBER NOT NULL, NAME VARCHAR2(128) NOT NULL, CODE VARCHAR2(64) NOT NULL, URL_PATTERN VARCHAR2(512) NOT NULL, AUTHENTICATION_FILTER VARCHAR2(64), AUTHORIZATION_FILTER VARCHAR2(64), STATUS CHAR(1) NOT NULL, SORT NUMBER DEFAULT -1  NOT NULL, CREATOR VARCHAR2(30), CREATE_TIME TIMESTAMP(6), UPDATOR VARCHAR2(30), UPDATE_TIME TIMESTAMP(6), CONSTRAINT PK_AP_ACCESS_PERM PRIMARY KEY (ID) );
COMMENT ON TABLE AP_ACCESS_PERM IS '访问权限表，匹配角色及操作权限';
COMMENT ON COLUMN AP_ACCESS_PERM.ID IS '访问权限编号';
COMMENT ON COLUMN AP_ACCESS_PERM.APP_ID IS '应用编号';
COMMENT ON COLUMN AP_ACCESS_PERM.NAME IS '访问权限名称';
COMMENT ON COLUMN AP_ACCESS_PERM.CODE IS '访问权限代码';
COMMENT ON COLUMN AP_ACCESS_PERM.URL_PATTERN IS '匹配的URL';
COMMENT ON COLUMN AP_ACCESS_PERM.AUTHENTICATION_FILTER IS 'anon,authcBasic,authc,user及自定义';
COMMENT ON COLUMN AP_ACCESS_PERM.AUTHORIZATION_FILTER IS 'perms,roles,ssl,rest,port及自定义';
COMMENT ON COLUMN AP_ACCESS_PERM.STATUS IS '访问权限状态。0-无效/1-有效';
COMMENT ON COLUMN AP_ACCESS_PERM.SORT IS '顺序-应用于FIRST MATCH WINS原则，主要针对通配符的情况';
COMMENT ON COLUMN AP_ACCESS_PERM.CREATOR IS '创建人';
COMMENT ON COLUMN AP_ACCESS_PERM.CREATE_TIME IS '创建时间';
COMMENT ON COLUMN AP_ACCESS_PERM.UPDATOR IS '更新人';
COMMENT ON COLUMN AP_ACCESS_PERM.UPDATE_TIME IS '更新时间';
insert into AP_ACCESS_PERM (ID, APP_ID, NAME, CODE, URL_PATTERN, AUTHENTICATION_FILTER, AUTHORIZATION_FILTER, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (1, 1000, '管理员-AAP', 'AdminAAP', '/**/*.*', 'authcCustom', 'roles', '1', 999999999, null, null, null, null);
insert into AP_ACCESS_PERM (ID, APP_ID, NAME, CODE, URL_PATTERN, AUTHENTICATION_FILTER, AUTHORIZATION_FILTER, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (2, 1000, 'Pack访问', 'PackAccess', '/**/*.pack', 'anon', null, '1', 999999998, null, null, null, null);
insert into AP_ACCESS_PERM (ID, APP_ID, NAME, CODE, URL_PATTERN, AUTHENTICATION_FILTER, AUTHORIZATION_FILTER, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (3, 1000, '首页访问', 'defaultAccess', '/default.html', 'anon', null, '1', 999999997, null, null, null, null);
insert into AP_ACCESS_PERM (ID, APP_ID, NAME, CODE, URL_PATTERN, AUTHENTICATION_FILTER, AUTHORIZATION_FILTER, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (4, 1000, 'GIF访问', 'GIFAccess', '/**/*.gif', 'anon', null, '1', 999999996, null, null, null, null);
insert into AP_ACCESS_PERM (ID, APP_ID, NAME, CODE, URL_PATTERN, AUTHENTICATION_FILTER, AUTHORIZATION_FILTER, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (5, 1000, '模块加载器访问', 'LoadModuleAccess', '/**/loadModule.jsp', 'anon', null, '1', 999999995, null, null, null, null);
insert into AP_ACCESS_PERM (ID, APP_ID, NAME, CODE, URL_PATTERN, AUTHENTICATION_FILTER, AUTHORIZATION_FILTER, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (6, 1000, 'Js加载访问', 'JsLoadAccess', '/**/loadJs.jsp', 'anon', null, '1', 999999994, null, null, null, null);
insert into AP_ACCESS_PERM (ID, APP_ID, NAME, CODE, URL_PATTERN, AUTHENTICATION_FILTER, AUTHORIZATION_FILTER, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (7, 1000, 'Css加载访问', 'CssLoadAccess', '/**/loadCss.jsp', 'anon', null, '1', 999999993, null, null, null, null);
insert into AP_ACCESS_PERM (ID, APP_ID, NAME, CODE, URL_PATTERN, AUTHENTICATION_FILTER, AUTHORIZATION_FILTER, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (8, 1000, 'PNG访问', 'PNGAccess', '/**/*.png', 'anon', null, '1', 999999992, null, null, null, null);
insert into AP_ACCESS_PERM (ID, APP_ID, NAME, CODE, URL_PATTERN, AUTHENTICATION_FILTER, AUTHORIZATION_FILTER, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (9, 1000, 'Captcha访问', 'CaptchaAccess', '/**/captcha.image', 'anon', null, '1', 999999991, null, null, null, null);
insert into AP_ACCESS_PERM (ID, APP_ID, NAME, CODE, URL_PATTERN, AUTHENTICATION_FILTER, AUTHORIZATION_FILTER, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (10, 1000, '登录资源访问', 'LoginAccess', '/login/*.json', 'anon', null, '1', 999999990, null, null, null, null);
insert into AP_ACCESS_PERM (ID, APP_ID, NAME, CODE, URL_PATTERN, AUTHENTICATION_FILTER, AUTHORIZATION_FILTER, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (11, 1000, '初始鉴权访问', 'AuthAccess', '/auth/*.json', 'anon', null, '1', 999999989, null, null, null, null);
CREATE UNIQUE INDEX Index_8 ON AP_ACCESS_PERM (CODE);
CREATE UNIQUE INDEX Index_4 ON AP_ACCESS_PERM (NAME);
DROP TABLE AP_APPLICATION;
CREATE TABLE AP_APPLICATION ( ID NUMBER NOT NULL, NAME VARCHAR2(50) NOT NULL, CODE VARCHAR2(20), TYPE VARCHAR2(6), DESC_ VARCHAR2(500), STATUS CHAR(1) NOT NULL, CREATOR VARCHAR2(30), CREATE_TIME TIMESTAMP(6), UPDATOR VARCHAR2(30), UPDATE_TIME TIMESTAMP(6), CONSTRAINT PK_AP_APPLICATION PRIMARY KEY (ID) );
COMMENT ON TABLE AP_APPLICATION IS '应用系统';
COMMENT ON COLUMN AP_APPLICATION.ID IS '应用编号';
COMMENT ON COLUMN AP_APPLICATION.NAME IS '应用名称';
COMMENT ON COLUMN AP_APPLICATION.CODE IS '应用代码';
COMMENT ON COLUMN AP_APPLICATION.TYPE IS '应用类型';
COMMENT ON COLUMN AP_APPLICATION.DESC_ IS '应用描述';
COMMENT ON COLUMN AP_APPLICATION.STATUS IS '应用状态。0-无效/1-有效';
COMMENT ON COLUMN AP_APPLICATION.CREATOR IS '创建人';
COMMENT ON COLUMN AP_APPLICATION.CREATE_TIME IS '创建时间';
COMMENT ON COLUMN AP_APPLICATION.UPDATOR IS '更新人';
COMMENT ON COLUMN AP_APPLICATION.UPDATE_TIME IS '更新时间';
insert into AP_APPLICATION (ID, NAME, CODE, TYPE, DESC_, STATUS, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (998, '测试管理系统', 'TEST', null, null, '1', null, null, null, null);
insert into AP_APPLICATION (ID, NAME, CODE, TYPE, DESC_, STATUS, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (999, '调试管理系统', 'DEBUG', null, null, '1', null, null, null, null);
insert into AP_APPLICATION (ID, NAME, CODE, TYPE, DESC_, STATUS, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (1000, '本地应用系统', 'LOCAL', null, null, '1', null, null, null, null);
DROP TABLE AP_GROUP;
CREATE TABLE AP_GROUP ( ID NUMBER NOT NULL, APP_ID NUMBER NOT NULL, NAME VARCHAR2(128) NOT NULL, CODE VARCHAR2(20), TYPE VARCHAR2(6), DESC_ VARCHAR2(512), STATUS CHAR(1) NOT NULL, CREATOR VARCHAR2(30), CREATE_TIME TIMESTAMP(6), UPDATOR VARCHAR2(30), UPDATE_TIME TIMESTAMP(6), CONSTRAINT PK_AP_GROUP PRIMARY KEY (ID) );
COMMENT ON TABLE AP_GROUP IS '组';
COMMENT ON COLUMN AP_GROUP.ID IS '组编号';
COMMENT ON COLUMN AP_GROUP.APP_ID IS '应用编号';
COMMENT ON COLUMN AP_GROUP.NAME IS '组名称';
COMMENT ON COLUMN AP_GROUP.CODE IS '组代码';
COMMENT ON COLUMN AP_GROUP.TYPE IS '组类型';
COMMENT ON COLUMN AP_GROUP.DESC_ IS '组描述';
COMMENT ON COLUMN AP_GROUP.STATUS IS '用户组状态。0-无效/1-有效';
COMMENT ON COLUMN AP_GROUP.CREATOR IS '创建人';
COMMENT ON COLUMN AP_GROUP.CREATE_TIME IS '创建时间';
COMMENT ON COLUMN AP_GROUP.UPDATOR IS '更新人';
COMMENT ON COLUMN AP_GROUP.UPDATE_TIME IS '更新时间';
CREATE UNIQUE INDEX Index_2 ON AP_GROUP (NAME);
DROP TABLE AP_MENU;
CREATE TABLE AP_MENU ( ID NUMBER NOT NULL, APP_ID NUMBER NOT NULL, PARENT_ID NUMBER DEFAULT -1  NOT NULL, CODE VARCHAR2(20), URL VARCHAR2(512), MODULE_LOCATION VARCHAR2(512), NAME VARCHAR2(64) NOT NULL, LEAF CHAR(1) NOT NULL, ICON VARCHAR2(30), HIERARCHY NUMBER NOT NULL, STATUS CHAR(1) NOT NULL, SORT NUMBER NOT NULL, CREATOR VARCHAR2(30), CREATE_TIME TIMESTAMP(6), UPDATOR VARCHAR2(30), UPDATE_TIME TIMESTAMP(6), CONSTRAINT PK_AP_MENU PRIMARY KEY (ID) );
COMMENT ON TABLE AP_MENU IS '菜单表';
COMMENT ON COLUMN AP_MENU.ID IS '菜单编号';
COMMENT ON COLUMN AP_MENU.APP_ID IS '应用编号';
COMMENT ON COLUMN AP_MENU.PARENT_ID IS '父菜单编号。值-1定为顶级菜单';
COMMENT ON COLUMN AP_MENU.CODE IS '菜单代码';
COMMENT ON COLUMN AP_MENU.URL IS '以http链接方式加载';
COMMENT ON COLUMN AP_MENU.MODULE_LOCATION IS '以模块方式加载';
COMMENT ON COLUMN AP_MENU.NAME IS '菜单名称';
COMMENT ON COLUMN AP_MENU.LEAF IS '叶子菜单。0-否/1-是';
COMMENT ON COLUMN AP_MENU.ICON IS '菜单图标';
COMMENT ON COLUMN AP_MENU.HIERARCHY IS '菜单层级';
COMMENT ON COLUMN AP_MENU.STATUS IS '菜单状态。0-无效/1-有效';
COMMENT ON COLUMN AP_MENU.SORT IS '显示顺序';
COMMENT ON COLUMN AP_MENU.CREATOR IS '创建人';
COMMENT ON COLUMN AP_MENU.CREATE_TIME IS '创建时间';
COMMENT ON COLUMN AP_MENU.UPDATOR IS '更新人';
COMMENT ON COLUMN AP_MENU.UPDATE_TIME IS '更新时间';
insert into AP_MENU (ID, APP_ID, PARENT_ID, CODE, URL, MODULE_LOCATION, NAME, LEAF, ICON, HIERARCHY, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (1, 1000, -1, null, null, '/WEB-INF/views/', '系统管理', '0', null, 1, '1', 2, null, null, null, null);
insert into AP_MENU (ID, APP_ID, PARENT_ID, CODE, URL, MODULE_LOCATION, NAME, LEAF, ICON, HIERARCHY, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (2, 1000, 1, null, null, '/WEB-INF/views/', '权限管理', '0', null, 2, '1', 1, null, null, null, null);
insert into AP_MENU (ID, APP_ID, PARENT_ID, CODE, URL, MODULE_LOCATION, NAME, LEAF, ICON, HIERARCHY, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (3, 1000, 2, null, null, '/WEB-INF/views/systemMGR/authCFG/funcMenu/module.xml', '功能菜单配置', '1', 'icon-script_gear', 3, '1', 1, null, null, null, null);
insert into AP_MENU (ID, APP_ID, PARENT_ID, CODE, URL, MODULE_LOCATION, NAME, LEAF, ICON, HIERARCHY, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (4, 1000, 2, null, null, '/WEB-INF/views/', '访问权限配置', '1', 'icon-application_go', 3, '1', 2, null, null, null, null);
insert into AP_MENU (ID, APP_ID, PARENT_ID, CODE, URL, MODULE_LOCATION, NAME, LEAF, ICON, HIERARCHY, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (5, 1000, 2, null, null, '/WEB-INF/views/', '操作权限配置', '1', 'icon-table_gear', 3, '1', 3, null, null, null, null);
insert into AP_MENU (ID, APP_ID, PARENT_ID, CODE, URL, MODULE_LOCATION, NAME, LEAF, ICON, HIERARCHY, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (6, 1000, 2, null, null, '/WEB-INF/views/', '角色配置', '1', 'icon-table_gear', 3, '1', 4, null, null, null, null);
insert into AP_MENU (ID, APP_ID, PARENT_ID, CODE, URL, MODULE_LOCATION, NAME, LEAF, ICON, HIERARCHY, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (7, 1000, 2, null, null, '/WEB-INF/views/', '用户配置', '1', 'icon-user_edit', 3, '1', 6, null, null, null, null);
insert into AP_MENU (ID, APP_ID, PARENT_ID, CODE, URL, MODULE_LOCATION, NAME, LEAF, ICON, HIERARCHY, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (8, 1000, 2, null, null, '/WEB-INF/views/', '用户组配置', '1', 'icon-group_gear', 3, '1', 5, null, null, null, null);
insert into AP_MENU (ID, APP_ID, PARENT_ID, CODE, URL, MODULE_LOCATION, NAME, LEAF, ICON, HIERARCHY, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (9, 1000, 2, null, null, '/WEB-INF/views/', '应用系统配置', '1', 'icon-application_edit', 3, '1', 7, null, null, null, null);
insert into AP_MENU (ID, APP_ID, PARENT_ID, CODE, URL, MODULE_LOCATION, NAME, LEAF, ICON, HIERARCHY, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (10, 1000, -1, null, null, '/WEB-INF/views/', '控件展示', '0', null, 1, '1', 1, null, null, null, null);
insert into AP_MENU (ID, APP_ID, PARENT_ID, CODE, URL, MODULE_LOCATION, NAME, LEAF, ICON, HIERARCHY, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (11, 1000, 10, null, null, '/WEB-INF/views/', '网格(GRID)', '0', null, 2, '1', 1, null, null, null, null);
insert into AP_MENU (ID, APP_ID, PARENT_ID, CODE, URL, MODULE_LOCATION, NAME, LEAF, ICON, HIERARCHY, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (12, 1000, 11, null, null, '/WEB-INF/views/', '常规网格', '1', 'icon-application_form_edit', 3, '1', 2, null, null, null, null);
insert into AP_MENU (ID, APP_ID, PARENT_ID, CODE, URL, MODULE_LOCATION, NAME, LEAF, ICON, HIERARCHY, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (13, 1000, 11, null, null, '/WEB-INF/views/', '分页网格', '1', 'icon-application_delete', 3, '1', 1, null, null, null, null);
DROP TABLE AP_OPER_PERM;
CREATE TABLE AP_OPER_PERM ( ID NUMBER NOT NULL, APP_ID NUMBER NOT NULL, NAME VARCHAR2(128) NOT NULL, CODE VARCHAR2(64) NOT NULL, AUTHORIZED_OPER VARCHAR2(256) NOT NULL, STATUS CHAR(1) NOT NULL, SORT NUMBER DEFAULT -1  NOT NULL, CREATOR VARCHAR2(30), CREATE_TIME TIMESTAMP(6), UPDATOR VARCHAR2(30), UPDATE_TIME TIMESTAMP(6), CONSTRAINT PK_AP_OPER_PERM PRIMARY KEY (ID) );
COMMENT ON TABLE AP_OPER_PERM IS '操作权限表';
COMMENT ON COLUMN AP_OPER_PERM.ID IS '操作权限编号';
COMMENT ON COLUMN AP_OPER_PERM.APP_ID IS '应用编号';
COMMENT ON COLUMN AP_OPER_PERM.NAME IS '操作权限名称';
COMMENT ON COLUMN AP_OPER_PERM.CODE IS '操作权限代码';
COMMENT ON COLUMN AP_OPER_PERM.AUTHORIZED_OPER IS '授权操作';
COMMENT ON COLUMN AP_OPER_PERM.STATUS IS '操作权限状态。0-无效/1-有效';
COMMENT ON COLUMN AP_OPER_PERM.SORT IS '顺序-应用于FIRST MATCH WINS原则，主要针对通配符的情况';
COMMENT ON COLUMN AP_OPER_PERM.CREATOR IS '创建人';
COMMENT ON COLUMN AP_OPER_PERM.CREATE_TIME IS '创建时间';
COMMENT ON COLUMN AP_OPER_PERM.UPDATOR IS '更新人';
COMMENT ON COLUMN AP_OPER_PERM.UPDATE_TIME IS '更新时间';
insert into AP_OPER_PERM (ID, APP_ID, NAME, CODE, AUTHORIZED_OPER, STATUS, SORT, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (1, 1000, '管理员-AOP', 'adminAOP', 'oper:all', '1', 99999999, null, null, null, null);
CREATE UNIQUE INDEX Index_9 ON AP_OPER_PERM (CODE);
CREATE UNIQUE INDEX Index_5 ON AP_OPER_PERM (NAME);
DROP TABLE AP_REF_GROUP_ROLE;
CREATE TABLE AP_REF_GROUP_ROLE ( GROUP_ID NUMBER NOT NULL, ROLE_ID NUMBER NOT NULL, CONSTRAINT PK_AP_REF_GROUP_ROLE PRIMARY KEY (GROUP_ID, ROLE_ID) );
COMMENT ON TABLE AP_REF_GROUP_ROLE IS '组包含的角色';
COMMENT ON COLUMN AP_REF_GROUP_ROLE.GROUP_ID IS '组编号';
COMMENT ON COLUMN AP_REF_GROUP_ROLE.ROLE_ID IS '角色编号';
DROP TABLE AP_REF_ROLE_ACCESS_PERM;
CREATE TABLE AP_REF_ROLE_ACCESS_PERM ( ROLE_ID NUMBER NOT NULL, ACCESS_PERM_ID NUMBER NOT NULL, CONSTRAINT PK_AP_REF_ROLE_ACCESS_PERM PRIMARY KEY (ROLE_ID, ACCESS_PERM_ID) );
COMMENT ON TABLE AP_REF_ROLE_ACCESS_PERM IS '角色所拥有的访问权限';
COMMENT ON COLUMN AP_REF_ROLE_ACCESS_PERM.ROLE_ID IS '角色编号';
COMMENT ON COLUMN AP_REF_ROLE_ACCESS_PERM.ACCESS_PERM_ID IS '访问权限编号';
insert into AP_REF_ROLE_ACCESS_PERM (ROLE_ID, ACCESS_PERM_ID) values (2, 1);
DROP TABLE AP_REF_ROLE_MENU;
CREATE TABLE AP_REF_ROLE_MENU ( ROLE_ID NUMBER NOT NULL, MENU_ID NUMBER NOT NULL, CONSTRAINT PK_AP_REF_ROLE_MENU PRIMARY KEY (ROLE_ID, MENU_ID) );
COMMENT ON TABLE AP_REF_ROLE_MENU IS '角色所拥有的菜单';
COMMENT ON COLUMN AP_REF_ROLE_MENU.ROLE_ID IS '角色编号';
COMMENT ON COLUMN AP_REF_ROLE_MENU.MENU_ID IS '菜单编号';
insert into AP_REF_ROLE_MENU (ROLE_ID, MENU_ID) values (1, 1);
insert into AP_REF_ROLE_MENU (ROLE_ID, MENU_ID) values (1, 2);
insert into AP_REF_ROLE_MENU (ROLE_ID, MENU_ID) values (1, 3);
insert into AP_REF_ROLE_MENU (ROLE_ID, MENU_ID) values (1, 4);
insert into AP_REF_ROLE_MENU (ROLE_ID, MENU_ID) values (1, 5);
insert into AP_REF_ROLE_MENU (ROLE_ID, MENU_ID) values (1, 6);
insert into AP_REF_ROLE_MENU (ROLE_ID, MENU_ID) values (1, 7);
insert into AP_REF_ROLE_MENU (ROLE_ID, MENU_ID) values (1, 8);
insert into AP_REF_ROLE_MENU (ROLE_ID, MENU_ID) values (1, 9);
insert into AP_REF_ROLE_MENU (ROLE_ID, MENU_ID) values (1, 10);
insert into AP_REF_ROLE_MENU (ROLE_ID, MENU_ID) values (1, 11);
insert into AP_REF_ROLE_MENU (ROLE_ID, MENU_ID) values (1, 12);
insert into AP_REF_ROLE_MENU (ROLE_ID, MENU_ID) values (1, 13);
DROP TABLE AP_REF_ROLE_OPER_PERM;
CREATE TABLE AP_REF_ROLE_OPER_PERM ( ROLE_ID NUMBER NOT NULL, OPER_PERM_ID NUMBER NOT NULL, CONSTRAINT PK_AP_REF_ROLE_OPER_PERM PRIMARY KEY (ROLE_ID, OPER_PERM_ID) );
COMMENT ON TABLE AP_REF_ROLE_OPER_PERM IS '角色所拥有的操作权限';
COMMENT ON COLUMN AP_REF_ROLE_OPER_PERM.ROLE_ID IS '角色编号';
COMMENT ON COLUMN AP_REF_ROLE_OPER_PERM.OPER_PERM_ID IS '操作权限编号';
insert into AP_REF_ROLE_OPER_PERM (ROLE_ID, OPER_PERM_ID) values (3, 1);
DROP TABLE AP_REF_USER_APP;
CREATE TABLE AP_REF_USER_APP ( APP_ID NUMBER NOT NULL, USER_ID NUMBER NOT NULL, CONSTRAINT PK_AP_REF_USER_APP PRIMARY KEY (APP_ID, USER_ID) );
COMMENT ON TABLE AP_REF_USER_APP IS '用户所属应用系统';
COMMENT ON COLUMN AP_REF_USER_APP.APP_ID IS '应用编号';
COMMENT ON COLUMN AP_REF_USER_APP.USER_ID IS '用户编号';
insert into AP_REF_USER_APP (APP_ID, USER_ID) values (1000, 1);
DROP TABLE AP_REF_USER_GROUP;
CREATE TABLE AP_REF_USER_GROUP ( USER_ID NUMBER NOT NULL, GROUP_ID NUMBER NOT NULL, CONSTRAINT PK_AP_REF_USER_GROUP PRIMARY KEY (USER_ID, GROUP_ID) );
COMMENT ON TABLE AP_REF_USER_GROUP IS '用户拥有的组';
COMMENT ON COLUMN AP_REF_USER_GROUP.USER_ID IS '用户编号';
COMMENT ON COLUMN AP_REF_USER_GROUP.GROUP_ID IS 'v';
DROP TABLE AP_REF_USER_ROLE;
CREATE TABLE AP_REF_USER_ROLE ( USER_ID NUMBER NOT NULL, ROLE_ID NUMBER NOT NULL, CONSTRAINT PK_AP_REF_USER_ROLE PRIMARY KEY (USER_ID, ROLE_ID) );
COMMENT ON TABLE AP_REF_USER_ROLE IS '用户所拥有的权限';
COMMENT ON COLUMN AP_REF_USER_ROLE.USER_ID IS '用户编号';
COMMENT ON COLUMN AP_REF_USER_ROLE.ROLE_ID IS '角色编号';
insert into AP_REF_USER_ROLE (USER_ID, ROLE_ID) values (1, 1);
insert into AP_REF_USER_ROLE (USER_ID, ROLE_ID) values (1, 2);
insert into AP_REF_USER_ROLE (USER_ID, ROLE_ID) values (1, 3);
DROP TABLE AP_ROLE;
CREATE TABLE AP_ROLE ( ID NUMBER NOT NULL, APP_ID NUMBER NOT NULL, NAME VARCHAR2(128) NOT NULL, CODE VARCHAR2(64) NOT NULL, TYPE CHAR(1) NOT NULL, DESC_ VARCHAR2(500), STATUS CHAR(1) NOT NULL, CREATOR VARCHAR2(30), CREATE_TIME TIMESTAMP(6), UPDATOR VARCHAR2(30), UPDATE_TIME TIMESTAMP(6), CONSTRAINT PK_AP_ROLE PRIMARY KEY (ID) );
COMMENT ON TABLE AP_ROLE IS '角色表';
COMMENT ON COLUMN AP_ROLE.ID IS '角色编号';
COMMENT ON COLUMN AP_ROLE.APP_ID IS '应用编号';
COMMENT ON COLUMN AP_ROLE.NAME IS '角色名称';
COMMENT ON COLUMN AP_ROLE.CODE IS '角色代码-shiro过滤器roles的参数';
COMMENT ON COLUMN AP_ROLE.TYPE IS '1-功能角色，2-资源角色，3-操作角色';
COMMENT ON COLUMN AP_ROLE.DESC_ IS '角色描述';
COMMENT ON COLUMN AP_ROLE.STATUS IS '角色状态。0-无效/1-有效';
COMMENT ON COLUMN AP_ROLE.CREATOR IS '创建人';
COMMENT ON COLUMN AP_ROLE.CREATE_TIME IS '创建时间';
COMMENT ON COLUMN AP_ROLE.UPDATOR IS '更新人';
COMMENT ON COLUMN AP_ROLE.UPDATE_TIME IS '更新时间';
insert into AP_ROLE (ID, APP_ID, NAME, CODE, TYPE, DESC_, STATUS, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (1, 1000, '管理员-FUNC', 'FuncAdmin', '1', null, '1', null, null, null, null);
insert into AP_ROLE (ID, APP_ID, NAME, CODE, TYPE, DESC_, STATUS, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (2, 1000, '管理员-ACCESS', 'AccessAdmin', '2', null, '1', null, null, null, null);
insert into AP_ROLE (ID, APP_ID, NAME, CODE, TYPE, DESC_, STATUS, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (3, 1000, '管理员-OPER', 'OperAdmin', '3', null, '1', null, null, null, null);
CREATE UNIQUE INDEX Index_10 ON AP_ROLE (CODE, TYPE);
CREATE UNIQUE INDEX Index_6 ON AP_ROLE (NAME, TYPE);
DROP TABLE AP_SEQ;
CREATE TABLE AP_SEQ ( SEQ_NAME VARCHAR2(32) NOT NULL, SEQ_VALUE NUMBER NOT NULL, CONSTRAINT PK_AP_SEQ PRIMARY KEY (SEQ_NAME) );
COMMENT ON TABLE AP_SEQ IS '基于Table的Sequence';
insert into AP_SEQ (SEQ_NAME, SEQ_VALUE) values ('AP_APPLICATION_SEQ', 1001);
insert into AP_SEQ (SEQ_NAME, SEQ_VALUE) values ('AP_USER_SEQ', 2);
insert into AP_SEQ (SEQ_NAME, SEQ_VALUE) values ('AP_ROLE_SEQ', 4);
insert into AP_SEQ (SEQ_NAME, SEQ_VALUE) values ('AP_GROUP_SEQ', 1);
insert into AP_SEQ (SEQ_NAME, SEQ_VALUE) values ('AP_ACCESS_PERM_SEQ', 13);
insert into AP_SEQ (SEQ_NAME, SEQ_VALUE) values ('AP_OPER_PERM_SEQ', 2);
insert into AP_SEQ (SEQ_NAME, SEQ_VALUE) values ('AP_MENU_SEQ', 115);
DROP TABLE AP_USER;
CREATE TABLE AP_USER ( ID NUMBER NOT NULL, USERNAME VARCHAR2(30) NOT NULL, PASSWORD VARCHAR2(32) NOT NULL, USER_TYPE VARCHAR2(6), CH_NAME NVARCHAR2(20), CH_SPELL_NAME VARCHAR2(60), FIRST_NAME VARCHAR2(20), LAST_NAME VARCHAR2(20), GENDER CHAR(1), ID_TYPE VARCHAR2(6), ID_NO VARCHAR2(30), STATUS CHAR(1) NOT NULL, CREATOR VARCHAR2(30), CREATE_TIME TIMESTAMP(6), UPDATOR VARCHAR2(30), UPDATE_TIME TIMESTAMP(6), CONSTRAINT PK_AP_USER PRIMARY KEY (ID) );
COMMENT ON TABLE AP_USER IS '用户表';
COMMENT ON COLUMN AP_USER.ID IS '用户编号';
COMMENT ON COLUMN AP_USER.USERNAME IS '用户名';
COMMENT ON COLUMN AP_USER.PASSWORD IS '密码。md5摘要';
COMMENT ON COLUMN AP_USER.USER_TYPE IS '用户类型';
COMMENT ON COLUMN AP_USER.CH_NAME IS '中文姓名';
COMMENT ON COLUMN AP_USER.CH_SPELL_NAME IS '姓名拼音';
COMMENT ON COLUMN AP_USER.FIRST_NAME IS '英文名';
COMMENT ON COLUMN AP_USER.LAST_NAME IS '英文姓';
COMMENT ON COLUMN AP_USER.GENDER IS '性别。M-男/F-女';
COMMENT ON COLUMN AP_USER.ID_TYPE IS '证件类型';
COMMENT ON COLUMN AP_USER.ID_NO IS '证件号码';
COMMENT ON COLUMN AP_USER.STATUS IS '用户状态。0-无效/1-有效';
COMMENT ON COLUMN AP_USER.CREATOR IS '创建人';
COMMENT ON COLUMN AP_USER.CREATE_TIME IS '创建时间';
COMMENT ON COLUMN AP_USER.UPDATOR IS '更新人';
COMMENT ON COLUMN AP_USER.UPDATE_TIME IS '更新时间';
insert into AP_USER (ID, USERNAME, PASSWORD, USER_TYPE, CH_NAME, CH_SPELL_NAME, FIRST_NAME, LAST_NAME, GENDER, ID_TYPE, ID_NO, STATUS, CREATOR, CREATE_TIME, UPDATOR, UPDATE_TIME) values (1, 'admin', '96e79218965eb72c92a549dd5a330112', null, null, null, null, null, null, null, null, '1', null, null, null, null);
CREATE UNIQUE INDEX Index_1 ON AP_USER (USERNAME);
