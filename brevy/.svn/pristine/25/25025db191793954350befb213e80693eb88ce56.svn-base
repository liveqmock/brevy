DROP TABLE AP_ACCESS_PERM;
CREATE TABLE AP_ACCESS_PERM ( ID NUMBER NOT NULL, APP_ID NUMBER NOT NULL, CODE VARCHAR2(20), URL_PATTERN VARCHAR2(512) NOT NULL, PATTERN_EXPR VARCHAR2(512) NOT NULL, STATUS CHAR(1) NOT NULL, ORDER NUMBER DEFAULT -1  NOT NULL, UPDATOR VARCHAR2(30), UPDATE_TIME TIMESTAMP(6), CONSTRAINT PK_AP_ACCESS_PERM PRIMARY KEY (ID) );
COMMENT ON TABLE AP_ACCESS_PERM IS '访问权限表，匹配角色及操作权限';
COMMENT ON COLUMN AP_ACCESS_PERM.ID IS '访问权限编号';
COMMENT ON COLUMN AP_ACCESS_PERM.APP_ID IS '应用编号';
COMMENT ON COLUMN AP_ACCESS_PERM.CODE IS '访问权限代码';
COMMENT ON COLUMN AP_ACCESS_PERM.URL_PATTERN IS '匹配的URL';
COMMENT ON COLUMN AP_ACCESS_PERM.PATTERN_EXPR IS '匹配的表达式，用逗号隔开';
COMMENT ON COLUMN AP_ACCESS_PERM.STATUS IS '访问权限状态-0-无效/1-有效';
COMMENT ON COLUMN AP_ACCESS_PERM.ORDER IS '顺序-应用于FIRST MATCH WINS原则，主要针对通配符的情况';
COMMENT ON COLUMN AP_ACCESS_PERM.UPDATOR IS '更新人';
COMMENT ON COLUMN AP_ACCESS_PERM.UPDATE_TIME IS '更新时间';
DROP TABLE AP_APPLICATION;
CREATE TABLE AP_APPLICATION ( ID NUMBER NOT NULL, NAME VARCHAR2(50) NOT NULL, CODE VARCHAR2(20), TYPE VARCHAR2(6), DESC VARCHAR2(500), STATUS CHAR(1) NOT NULL, UPDATOR VARCHAR2(30), UPDATE_TIME TIMESTAMP(6), CONSTRAINT PK_AP_APP PRIMARY KEY (ID) );
COMMENT ON TABLE AP_APPLICATION IS '应用系统';
COMMENT ON COLUMN AP_APPLICATION.ID IS '应用编号';
COMMENT ON COLUMN AP_APPLICATION.NAME IS '应用名称';
COMMENT ON COLUMN AP_APPLICATION.CODE IS '应用代码';
COMMENT ON COLUMN AP_APPLICATION.TYPE IS '应用类型';
COMMENT ON COLUMN AP_APPLICATION.DESC IS '应用描述';
COMMENT ON COLUMN AP_APPLICATION.STATUS IS '应用状态。0-无效/1-有效';
COMMENT ON COLUMN AP_APPLICATION.UPDATOR IS '更新人';
COMMENT ON COLUMN AP_APPLICATION.UPDATE_TIME IS '更新时间';
insert into AP_APPLICATION (ID, NAME, CODE, TYPE, DESC, STATUS, UPDATOR, UPDATE_TIME) values (1, 'BREVY', '000000', 'DEMO', '默认框架系统', '1', 'admin', null);
DROP TABLE AP_MENU;
CREATE TABLE AP_MENU ( ID NUMBER NOT NULL, APP_ID NUMBER NOT NULL, PARENT_ID NUMBER DEFAULT -1  NOT NULL, CODE VARCHAR2(20), PATH_SEQ VARCHAR2(512) NOT NULL, NAME VARCHAR2(30) NOT NULL, LEAF CHAR(1) NOT NULL, LEAF_ICON VARCHAR2(30), LEVEL NUMBER NOT NULL, DISPLAY_ORDER NUMBER NOT NULL, STATUS CHAR(1) NOT NULL, UPDATOR VARCHAR2(30), UPDATE_TIME TIMESTAMP(6), CONSTRAINT PK_AP_MENU PRIMARY KEY (ID) );
COMMENT ON TABLE AP_MENU IS '菜单表';
COMMENT ON COLUMN AP_MENU.ID IS '菜单编号';
COMMENT ON COLUMN AP_MENU.APP_ID IS '应用编号';
COMMENT ON COLUMN AP_MENU.PARENT_ID IS '父菜单编号。默认值-1，即为顶级菜单';
COMMENT ON COLUMN AP_MENU.CODE IS '菜单代码';
COMMENT ON COLUMN AP_MENU.PATH_SEQ IS '菜单路径序列';
COMMENT ON COLUMN AP_MENU.NAME IS '菜单名称';
COMMENT ON COLUMN AP_MENU.LEAF IS '叶子菜单。0-否/1-是';
COMMENT ON COLUMN AP_MENU.LEAF_ICON IS '叶子???单图标';
COMMENT ON COLUMN AP_MENU.LEVEL IS '菜单层次';
COMMENT ON COLUMN AP_MENU.DISPLAY_ORDER IS '显示顺序';
COMMENT ON COLUMN AP_MENU.STATUS IS '菜单状态。0-无效/1-有效';
COMMENT ON COLUMN AP_MENU.UPDATOR IS '更新人';
COMMENT ON COLUMN AP_MENU.UPDATE_TIME IS '更新时间';
DROP TABLE AP_OPER_PERM;
CREATE TABLE AP_OPER_PERM ( ID NUMBER NOT NULL, APP_ID NUMBER NOT NULL, CODE VARCHAR2(20), AUTHORIZED_OPER VARCHAR2(64) NOT NULL, ORDER NUMBER DEFAULT -1  NOT NULL, UPDATOR VARCHAR2(30), UPDATE_TIME TIMESTAMP(6), CONSTRAINT PK_AP_OPER_PERM PRIMARY KEY (ID) );
COMMENT ON TABLE AP_OPER_PERM IS '操作权限表';
COMMENT ON COLUMN AP_OPER_PERM.ID IS '操作权限编号';
COMMENT ON COLUMN AP_OPER_PERM.APP_ID IS '应用编号';
COMMENT ON COLUMN AP_OPER_PERM.CODE IS '操作权限代码';
COMMENT ON COLUMN AP_OPER_PERM.AUTHORIZED_OPER IS '授权操作';
COMMENT ON COLUMN AP_OPER_PERM.ORDER IS '顺序-应用于FIRST MATCH WINS原则，主要针对通配符的情况';
COMMENT ON COLUMN AP_OPER_PERM.UPDATOR IS '更新人';
COMMENT ON COLUMN AP_OPER_PERM.UPDATE_TIME IS '更新时间';
insert into AP_OPER_PERM (ID, APP_ID, CODE, AUTHORIZED_OPER, ORDER, UPDATOR, UPDATE_TIME) values (1, 1, null, 'oper:all', -1, 'admin', null);
DROP TABLE AP_REF_ROLE_ACCESS_PERM;
CREATE TABLE AP_REF_ROLE_ACCESS_PERM ( ROLE_ID NUMBER NOT NULL, ACCESS_PERM_ID NUMBER NOT NULL, CONSTRAINT PKR_RAP PRIMARY KEY (ROLE_ID, ACCESS_PERM_ID) );
COMMENT ON TABLE AP_REF_ROLE_ACCESS_PERM IS '角色拥有访问权限表';
COMMENT ON COLUMN AP_REF_ROLE_ACCESS_PERM.ROLE_ID IS '角色编号';
COMMENT ON COLUMN AP_REF_ROLE_ACCESS_PERM.ACCESS_PERM_ID IS '访问权限编号';
DROP TABLE AP_REF_ROLE_MENU;
CREATE TABLE AP_REF_ROLE_MENU ( ROLE_ID NUMBER NOT NULL, MENU_ID NUMBER NOT NULL, CONSTRAINT PKR_ROLE_MENU PRIMARY KEY (ROLE_ID, MENU_ID) );
COMMENT ON TABLE AP_REF_ROLE_MENU IS '角色拥有菜单表';
COMMENT ON COLUMN AP_REF_ROLE_MENU.ROLE_ID IS '角色编号';
COMMENT ON COLUMN AP_REF_ROLE_MENU.MENU_ID IS '菜单编号';
DROP TABLE AP_REF_ROLE_OPER_PERM;
CREATE TABLE AP_REF_ROLE_OPER_PERM ( ROLE_ID NUMBER NOT NULL, OPER_PERM_ID NUMBER NOT NULL, CONSTRAINT PKR_ROP PRIMARY KEY (ROLE_ID, OPER_PERM_ID) );
COMMENT ON TABLE AP_REF_ROLE_OPER_PERM IS '角色拥有操作权限表';
COMMENT ON COLUMN AP_REF_ROLE_OPER_PERM.ROLE_ID IS '角色编号';
COMMENT ON COLUMN AP_REF_ROLE_OPER_PERM.OPER_PERM_ID IS '操作权限编号';
DROP TABLE AP_REF_USERGROUP_ROLE;
CREATE TABLE AP_REF_USERGROUP_ROLE ( USERGROUP_ID NUMBER NOT NULL, ROLE_ID NUMBER NOT NULL, CONSTRAINT PKR_UG_ROLE PRIMARY KEY (USERGROUP_ID, ROLE_ID) );
COMMENT ON TABLE AP_REF_USERGROUP_ROLE IS '用户组所赋角色表';
COMMENT ON COLUMN AP_REF_USERGROUP_ROLE.USERGROUP_ID IS '用户组编号';
COMMENT ON COLUMN AP_REF_USERGROUP_ROLE.ROLE_ID IS '角色编号';
insert into AP_REF_USERGROUP_ROLE (USERGROUP_ID, ROLE_ID) values (1, 1);
DROP TABLE AP_REF_USER_APP;
CREATE TABLE AP_REF_USER_APP ( APP_ID NUMBER NOT NULL, USER_ID NUMBER NOT NULL, CONSTRAINT PKR_USER_APP PRIMARY KEY (APP_ID, USER_ID) );
COMMENT ON TABLE AP_REF_USER_APP IS '用户所属应用系统表';
COMMENT ON COLUMN AP_REF_USER_APP.APP_ID IS '应用编号';
COMMENT ON COLUMN AP_REF_USER_APP.USER_ID IS '用户编号';
insert into AP_REF_USER_APP (APP_ID, USER_ID) values (1, 1);
DROP TABLE AP_REF_USER_ROLE;
CREATE TABLE AP_REF_USER_ROLE ( USER_ID NUMBER NOT NULL, ROLE_ID NUMBER NOT NULL, CONSTRAINT PKR_USER_ROLE PRIMARY KEY (USER_ID, ROLE_ID) );
COMMENT ON TABLE AP_REF_USER_ROLE IS '用户所赋权限表';
COMMENT ON COLUMN AP_REF_USER_ROLE.USER_ID IS '用户编号';
COMMENT ON COLUMN AP_REF_USER_ROLE.ROLE_ID IS '角色编号';
insert into AP_REF_USER_ROLE (USER_ID, ROLE_ID) values (1, 1);
DROP TABLE AP_ROLE;
CREATE TABLE AP_ROLE ( ID NUMBER NOT NULL, APP_ID NUMBER NOT NULL, NAME VARCHAR2(30), CODE VARCHAR2(20), TYPE VARCHAR2(6), DESC VARCHAR2(500), STATUS CHAR(1) NOT NULL, UPDATOR VARCHAR2(30), UPDATE_TIME TIMESTAMP(6), CONSTRAINT PK_AP_ROLE PRIMARY KEY (ID) );
COMMENT ON TABLE AP_ROLE IS '角色表';
COMMENT ON COLUMN AP_ROLE.ID IS '角色编号';
COMMENT ON COLUMN AP_ROLE.APP_ID IS '应用编号';
COMMENT ON COLUMN AP_ROLE.NAME IS '角色名称';
COMMENT ON COLUMN AP_ROLE.CODE IS '角色代码';
COMMENT ON COLUMN AP_ROLE.TYPE IS '角色类型';
COMMENT ON COLUMN AP_ROLE.DESC IS '角色描述';
COMMENT ON COLUMN AP_ROLE.STATUS IS '角色状态。0-无效/1-有效';
COMMENT ON COLUMN AP_ROLE.UPDATOR IS '更新人';
COMMENT ON COLUMN AP_ROLE.UPDATE_TIME IS '更新时间';
insert into AP_ROLE (ID, APP_ID, NAME, CODE, TYPE, DESC, STATUS, UPDATOR, UPDATE_TIME) values (1, 1, '管理员', null, null, null, '1', 'admin', null);
DROP TABLE AP_SEQ;
CREATE TABLE AP_SEQ ( SEQ_NAME VARCHAR2(20) NOT NULL, SEQ_VALUE NUMBER NOT NULL, CONSTRAINT PK_AP_SEQ PRIMARY KEY (SEQ_NAME) );
COMMENT ON TABLE AP_SEQ IS '基于Table的Sequence';
insert into AP_SEQ (SEQ_NAME, SEQ_VALUE) values ('AP_APPLICATION_SEQ', 2);
insert into AP_SEQ (SEQ_NAME, SEQ_VALUE) values ('AP_USER_SEQ', 2);
insert into AP_SEQ (SEQ_NAME, SEQ_VALUE) values ('AP_ROLE_SEQ', 2);
insert into AP_SEQ (SEQ_NAME, SEQ_VALUE) values ('AP_USERGROUP_SEQ', 2);
insert into AP_SEQ (SEQ_NAME, SEQ_VALUE) values ('AP_ACCESS_PERM_SEQ', 2);
insert into AP_SEQ (SEQ_NAME, SEQ_VALUE) values ('AP_OPER_PERM_SEQ', 2);
insert into AP_SEQ (SEQ_NAME, SEQ_VALUE) values ('AP_MENU_SEQ', 2);
DROP TABLE AP_USER;
CREATE TABLE AP_USER ( ID NUMBER NOT NULL, USERGROUP_ID NUMBER, USERNAME VARCHAR2(30) NOT NULL, PASSWORD VARCHAR2(32) NOT NULL, USER_TYPE VARCHAR2(6), CH_NAME NVARCHAR2(20), CH_SPELL_NAME VARCHAR2(60), FIRST_NAME VARCHAR2(20), LAST_NAME VARCHAR2(20), GENDER CHAR(1), ID_TYPE VARCHAR2(6), ID_NO VARCHAR2(30), STATUS CHAR(1) NOT NULL, UPDATOR VARCHAR2(30), UPDATE_TIME TIMESTAMP(6), CONSTRAINT PK_AP_USER PRIMARY KEY (ID) );
COMMENT ON TABLE AP_USER IS '用户表';
COMMENT ON COLUMN AP_USER.ID IS '用户编号';
COMMENT ON COLUMN AP_USER.USERGROUP_ID IS '用户组编号';
COMMENT ON COLUMN AP_USER.USERNAME IS '用户名';
COMMENT ON COLUMN AP_USER.PASSWORD IS '密码。md5摘要';
COMMENT ON COLUMN AP_USER.USER_TYPE IS '用户类型';
COMMENT ON COLUMN AP_USER.CH_NAME IS '中文姓名';
COMMENT ON COLUMN AP_USER.CH_SPELL_NAME IS '姓名拼音';
COMMENT ON COLUMN AP_USER.FIRST_NAME IS '英文名';
COMMENT ON COLUMN AP_USER.LAST_NAME IS '英文姓';
COMMENT ON COLUMN AP_USER.GENDER IS '性别。M-男/F-女';
COMMENT ON COLUMN AP_USER.ID_TYPE IS '证件类型';
COMMENT ON COLUMN AP_USER.ID_NO IS '证件号码';
COMMENT ON COLUMN AP_USER.STATUS IS '用户状态。0-无效/1-有效';
COMMENT ON COLUMN AP_USER.UPDATOR IS '更新人';
COMMENT ON COLUMN AP_USER.UPDATE_TIME IS '更新时间';
insert into AP_USER (ID, USERGROUP_ID, USERNAME, PASSWORD, USER_TYPE, CH_NAME, CH_SPELL_NAME, FIRST_NAME, LAST_NAME, GENDER, ID_TYPE, ID_NO, STATUS, UPDATOR, UPDATE_TIME) values (1, 1, 'admin', '21232f297a57a5a743894a0e4a801fc3', null, null, null, null, null, null, null, null, '1', null, null);
DROP TABLE AP_USERGROUP;
CREATE TABLE AP_USERGROUP ( ID NUMBER NOT NULL, APP_ID NUMBER NOT NULL, NAME VARCHAR2(30), CODE VARCHAR2(20), TYPE VARCHAR2(6), DESC VARCHAR2(500), STATUS CHAR(1) NOT NULL, UPDATOR VARCHAR2(30), UPDATE_TIME TIMESTAMP(6), CONSTRAINT PK_AP_USERGROUP PRIMARY KEY (ID) );
COMMENT ON TABLE AP_USERGROUP IS '用户组表';
COMMENT ON COLUMN AP_USERGROUP.ID IS '用户组编号';
COMMENT ON COLUMN AP_USERGROUP.APP_ID IS '应用编号';
COMMENT ON COLUMN AP_USERGROUP.NAME IS '用户组名称';
COMMENT ON COLUMN AP_USERGROUP.CODE IS '用户组代码';
COMMENT ON COLUMN AP_USERGROUP.TYPE IS '用户组类型';
COMMENT ON COLUMN AP_USERGROUP.DESC IS '用户组描述';
COMMENT ON COLUMN AP_USERGROUP.STATUS IS '用户组状态。0-无效/1-有效';
COMMENT ON COLUMN AP_USERGROUP.UPDATOR IS '更新人';
COMMENT ON COLUMN AP_USERGROUP.UPDATE_TIME IS '更新时间';
insert into AP_USERGROUP (ID, APP_ID, NAME, CODE, TYPE, DESC, STATUS, UPDATOR, UPDATE_TIME) values (1, 1, '管理维护组', null, null, null, '1', 'admin', null);
